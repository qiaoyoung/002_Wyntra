
#import <Foundation/Foundation.h>

NSString *StringFromScrimData(Byte *data);        


//: footerTitle
Byte kStr_pointImageValue[] = {84, 11, 71, 7, 215, 59, 241, 31, 40, 40, 45, 30, 43, 13, 34, 45, 37, 30, 139};


//: contact_tag_fragment_cancel
Byte kStr_saltTitle[] = {75, 27, 43, 13, 229, 88, 34, 1, 234, 29, 223, 192, 163, 56, 68, 67, 73, 54, 56, 73, 52, 73, 54, 60, 52, 59, 71, 54, 60, 66, 58, 67, 73, 52, 56, 54, 67, 56, 58, 65, 207};


//: activity_group_member_info2_shenfen
Byte kStr_totalVehicleValue[] = {5, 35, 49, 13, 75, 110, 113, 156, 99, 80, 2, 18, 36, 48, 50, 67, 56, 69, 56, 67, 72, 46, 54, 65, 62, 68, 63, 46, 60, 52, 60, 49, 52, 65, 46, 56, 61, 53, 62, 1, 46, 66, 55, 52, 61, 53, 52, 61, 173};


//: userType
Byte kStr_piracyExposeLitName[] = {32, 8, 99, 12, 61, 36, 119, 183, 239, 78, 103, 154, 18, 16, 2, 15, 241, 22, 13, 2, 235};


//: 设为管理员
Byte kStr_convictTitle[] = {56, 15, 35, 9, 6, 190, 211, 239, 42, 197, 139, 155, 193, 149, 151, 196, 139, 126, 196, 109, 99, 194, 110, 117, 21};


//: user
Byte kStr_lopeName[] = {80, 4, 7, 7, 31, 49, 56, 110, 108, 94, 107, 85};


//: activity_group_info_group_nick
Byte kStr_lawmakerTitle[] = {54, 30, 19, 7, 155, 24, 29, 78, 80, 97, 86, 99, 86, 97, 102, 76, 84, 95, 92, 98, 93, 76, 86, 91, 83, 92, 76, 84, 95, 92, 98, 93, 76, 91, 86, 80, 88, 157};


//: updateTeamRole
Byte kStr_yardValue[] = {53, 14, 20, 6, 79, 194, 97, 92, 80, 77, 96, 81, 64, 81, 77, 89, 62, 91, 88, 81, 196};


//: Modify_group_nickname
Byte kStr_directShouldValue[] = {75, 21, 35, 12, 193, 39, 171, 230, 216, 224, 218, 248, 42, 76, 65, 70, 67, 86, 60, 68, 79, 76, 82, 77, 60, 75, 70, 64, 72, 75, 62, 74, 66, 255};


//: leftEdge
Byte kStr_throughoutData[] = {99, 8, 80, 11, 49, 143, 237, 146, 97, 126, 153, 28, 21, 22, 36, 245, 20, 23, 21, 241};


//: 取消管理员
Byte kStr_whoeverSumIncreasedData[] = {94, 15, 27, 11, 68, 139, 201, 197, 203, 41, 201, 202, 116, 123, 203, 155, 109, 204, 147, 134, 204, 117, 107, 202, 118, 125, 54};


//: row
Byte kStr_committeeData[] = {79, 3, 35, 13, 97, 67, 198, 189, 30, 160, 237, 98, 154, 79, 76, 84, 23};


//: 群名片
Byte kStr_sessionGrossText[] = {21, 9, 18, 11, 214, 28, 222, 184, 12, 244, 98, 213, 172, 146, 211, 126, 123, 213, 119, 117, 219};


//: accessory
Byte kStr_housingTitle[] = {40, 9, 9, 5, 186, 88, 90, 90, 92, 106, 106, 102, 105, 112, 99};


//: rowHeight
Byte kStr_historyText[] = {56, 9, 22, 13, 14, 116, 113, 212, 204, 171, 131, 64, 156, 92, 89, 97, 50, 79, 83, 81, 82, 94, 159};


//: contact_tag_fragment_sure
Byte kStr_ambitData[] = {12, 25, 88, 12, 158, 159, 134, 27, 217, 121, 21, 63, 11, 23, 22, 28, 9, 11, 28, 7, 28, 9, 15, 7, 14, 26, 9, 15, 21, 13, 22, 28, 7, 27, 29, 26, 13, 143};


//: disableUserInteraction
Byte kStr_cosValue[] = {79, 22, 32, 12, 179, 36, 201, 193, 92, 125, 106, 207, 68, 73, 83, 65, 66, 76, 69, 53, 83, 69, 82, 41, 78, 84, 69, 82, 65, 67, 84, 73, 79, 78, 51};


//: headerTitle
Byte kStr_convictCheekValue[] = {41, 11, 37, 11, 210, 166, 189, 11, 44, 24, 16, 67, 64, 60, 63, 64, 77, 47, 68, 79, 71, 64, 164};


//: cellClass
Byte kStr_redSonData[] = {84, 9, 1, 6, 240, 255, 98, 100, 107, 107, 66, 107, 96, 114, 114, 50};


//: updateMute:
Byte kStr_publishName[] = {69, 11, 34, 14, 146, 97, 74, 239, 76, 158, 212, 40, 9, 25, 83, 78, 66, 63, 82, 67, 43, 83, 82, 67, 24, 142};


//: onKickBtnClick:
Byte kStr_retchQuitTitle[] = {42, 15, 1, 14, 141, 131, 203, 12, 213, 39, 158, 254, 68, 145, 110, 109, 74, 104, 98, 106, 65, 115, 109, 66, 107, 104, 98, 106, 57, 206};


//: 管理员操作
Byte kStr_nagData[] = {24, 15, 81, 7, 44, 55, 192, 150, 93, 80, 150, 63, 53, 148, 64, 71, 149, 66, 60, 147, 108, 75, 158};


//: extraInfo
Byte kStr_textureResolutionData[] = {16, 9, 93, 8, 217, 113, 251, 131, 8, 27, 23, 21, 4, 236, 17, 9, 18, 118};


//: detailTitle
Byte kStr_commendData[] = {87, 11, 59, 12, 225, 198, 118, 254, 46, 18, 70, 16, 41, 42, 57, 38, 46, 49, 25, 46, 57, 49, 42, 115};


//: updateTeamNick
Byte kStr_widelyOutsideContent[] = {9, 14, 74, 10, 128, 255, 142, 94, 168, 247, 43, 38, 26, 23, 42, 27, 10, 27, 23, 35, 4, 31, 25, 33, 8};


//: activity_group_member_info2_inviter
Byte kStr_speciesViaData[] = {77, 35, 52, 5, 144, 45, 47, 64, 53, 66, 53, 64, 69, 43, 51, 62, 59, 65, 60, 43, 57, 49, 57, 46, 49, 62, 43, 53, 58, 50, 59, 254, 43, 53, 58, 66, 53, 64, 49, 62, 107};


//: 未设置
Byte kStr_keyRecordingName[] = {84, 9, 89, 9, 251, 64, 134, 15, 253, 141, 67, 81, 143, 85, 101, 142, 100, 85, 254};


//: disable
Byte kStr_imageStretchData[] = {53, 7, 61, 7, 131, 164, 92, 39, 44, 54, 36, 37, 47, 40, 107};


//: action
Byte kStr_encounterName[] = {57, 6, 45, 9, 136, 91, 234, 163, 15, 52, 54, 71, 60, 66, 65, 42};


//: group_member_info_activity_mute_msg
Byte kStr_dentedWheneverValue[] = {90, 35, 82, 4, 21, 32, 29, 35, 30, 13, 27, 19, 27, 16, 19, 32, 13, 23, 28, 20, 29, 13, 15, 17, 34, 23, 36, 23, 34, 39, 13, 27, 35, 34, 19, 13, 27, 33, 21, 200};


//: title
Byte kStr_novelVehicleData[] = {40, 5, 83, 14, 88, 216, 71, 36, 248, 226, 163, 147, 98, 78, 33, 22, 33, 25, 18, 76};


//: forbidSelect
Byte kStr_sorryTartData[] = {8, 12, 38, 11, 36, 179, 59, 125, 78, 183, 88, 64, 73, 76, 60, 67, 62, 45, 63, 70, 63, 61, 78, 237};


//: 本地不存在
Byte kStr_therapistTianRegulatoryName[] = {75, 15, 25, 5, 150, 205, 131, 147, 204, 131, 151, 203, 159, 116, 204, 148, 127, 204, 131, 143, 73};


//: remove_member
Byte kStr_himRedValue[] = {36, 13, 68, 6, 207, 104, 46, 33, 41, 43, 50, 33, 27, 41, 33, 41, 30, 33, 46, 121};

// __DEBUG__
// __CLOSE_PRINT__
//
//  TeamMemberCardViewController.m
//  NIM
//
//  Created by Xuhui on 15/3/19.
//  Copyright (c) 2015年 Netease. All rights reserved.
//

// __M_A_C_R_O__
//: #import "ZZZTeamMemberCardViewController.h"
#import "PathPinViewController.h"
//: #import "DataCommonTableData.h"
#import "DataCommonTableData.h"
//: #import "ZZZCommonTableDelegate.h"
#import "ColumnShould.h"
//: #import "ZZZAvatarImageView.h"
#import "ShankView.h"
//: #import "ZZZTeamCardMemberItem.h"
#import "WithQuantityerval.h"
//: #import "ZZZKitUtil.h"
#import "TingText.h"
//: #import "DataKitDependency.h"
#import "DataKitDependency.h"
//: #import "AppleProjectKit.h"
#import "On.h"
//: #import "UIViewNimKit.h"
#import "UIViewNimKit.h"
//: #import "ZZZKitColorButtonCell.h"
#import "WithViewCell.h"
//: #import "ZZZKitSwitcherCell.h"
#import "LabelView.h"
//: #import "ZZZKitInfoFetchOption.h"
#import "CertainOption.h"
//: #import "ZZZTeamHelper.h"
#import "PathHelper.h"

//: @interface ZZZTeamMemberCardViewController () <UIActionSheetDelegate>{
@interface PathPinViewController () <UIActionSheetDelegate>{
    //: UIAlertView *_kickAlertView;
    UIAlertView *_kickAlertView;
    //: UIAlertView *_updateNickAlertView;
    UIAlertView *_updateNickAlertView;
}

//: @property (nonatomic, copy) NSString *memberId;
@property (nonatomic, copy) NSString *memberId;

//: @property (nonatomic, weak) ZZZTeamCardMemberItem *member;
@property (nonatomic, weak) WithQuantityerval *member;

//: @property (nonatomic, weak) ZZZTeamCardMemberItem *viewer;
@property (nonatomic, weak) WithQuantityerval *viewer;

//: @property (strong, nonatomic) UITableView *tableView;
@property (strong, nonatomic) UITableView *tableView;

//: @property (nonatomic,strong) ZZZCommonTableDelegate *delegator;
@property (nonatomic,strong) ColumnShould *delegator;

//: @property (nonatomic,weak) id <ZZZTeamMemberListDataSource> dataSource;
@property (nonatomic,weak) id <IndependentSource> dataSource;

//: @property (nonatomic,strong) NSArray *data;
@property (nonatomic,strong) NSArray *data;

//: @end
@end

//: @implementation ZZZTeamMemberCardViewController
@implementation PathPinViewController

//: - (void)dealloc {
- (void)dealloc {
    //: [[NSNotificationCenter defaultCenter] removeObserver:self];
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

//: - (instancetype)initWithMember:(NSString *)userId
- (instancetype)initWithPast:(NSString *)userId
                    //: dataSource:(id <ZZZTeamMemberListDataSource>) dataSource {
                    quantityUser:(id <IndependentSource>) dataSource {
    //: if (self = [super init]) {
    if (self = [super init]) {
        //: _memberId = userId;
        _memberId = userId;
        //: _dataSource = dataSource;
        _dataSource = dataSource;
        //: extern NSString *kConst_pointTapButtonData;
        extern NSString *kConst_pointTapButtonData;
        //: [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(teamMemberUpdate:) name:kConst_pointTapButtonData object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(obscured:) name:kConst_pointTapButtonData object:nil];
    }
    //: return self;
    return self;
}

//: - (void)viewDidLoad {
- (void)viewDidLoad {
    //: [super viewDidLoad];
    [super viewDidLoad];
    //: self.navigationItem.title = @"群名片".nim_localized;
    self.navigationItem.title = StringFromScrimData(kStr_sessionGrossText).start;
    //: [self.view addSubview:self.tableView];
    [self.view addSubview:self.tableView];

    //: [self refreshData];
    [self imageOrJobAssemblage];
    //: __weak typeof(self) wself = self;
    __weak typeof(self) wself = self;
    //: self.delegator = [[ZZZCommonTableDelegate alloc] initWithTableData:^NSArray *{
    self.delegator = [[ColumnShould alloc] initWithItem:^NSArray *{
        //: return wself.data;
        return wself.data;
    //: }];
    }];
    //: self.tableView.delegate = self.delegator;
    self.tableView.delegate = self.delegator;
    //: self.tableView.dataSource = self.delegator;
    self.tableView.dataSource = self.delegator;
}

//: - (NSArray *)buildData{
- (NSArray *)pallet{
    //: ZZZKitInfoFetchOption *option = [[ZZZKitInfoFetchOption alloc] init];
    CertainOption *option = [[CertainOption alloc] init];
    //: option.session = _dataSource.session;
    option.session = _dataSource.session;
    //: ZZZKitInfo *usrInfo = [[AppleProjectKit sharedKit] infoByUser:_member.userId option:option];
    MagnitudeCommentInfo *usrInfo = [[On along] toKey:_member.userId image:option];
    //: NSDictionary *headerItem = @{
    NSDictionary *headerItem = @{
                                 //: @"cellClass" : @"ZZZTeamMemberCardHeaderCell",
                                 StringFromScrimData(kStr_redSonData) : @"ViewCell",
                                 //: @"rowHeight" : @(222),
                                 StringFromScrimData(kStr_historyText) : @(222),
                                 //: @"extraInfo" : @{@"user":usrInfo, @"userType":@(_member.userType)},
                                 StringFromScrimData(kStr_textureResolutionData) : @{StringFromScrimData(kStr_lopeName):usrInfo, StringFromScrimData(kStr_piracyExposeLitName):@(_member.userType)},
                                 //: @"leftEdge" : @(15)
                                 StringFromScrimData(kStr_throughoutData) : @(15)
                                 //: };
                                 };
    //: NSDictionary *nickItem = @{
    NSDictionary *nickItem = @{
                               //: @"title" : [NTESLanguageManager getTextWithKey:@"activity_group_info_group_nick"],
                               StringFromScrimData(kStr_novelVehicleData) : [LabelCell tinkleKey:StringFromScrimData(kStr_lawmakerTitle)],
                               //: @"detailTitle" : (usrInfo.showName ?: [NTESLanguageManager getTextWithKey:@"未设置"]),
                               StringFromScrimData(kStr_commendData) : (usrInfo.showName ?: [LabelCell tinkleKey:StringFromScrimData(kStr_keyRecordingName)]),
                               //: @"action" : ([self isSelf] || [self canUpdateTeamMember])? @"updateTeamNick" : @"",
                               StringFromScrimData(kStr_encounterName) : ([self shadow] || [self outBy])? StringFromScrimData(kStr_widelyOutsideContent) : @"",
                               //: @"accessory" : ([self isSelf] || [self canUpdateTeamMember])? @(YES) : @(NO),
                               StringFromScrimData(kStr_housingTitle) : ([self shadow] || [self outBy])? @(YES) : @(NO),
                               //: @"rowHeight" : @(50),
                               StringFromScrimData(kStr_historyText) : @(50),
                               //: @"leftEdge" : @(15),
                               StringFromScrimData(kStr_throughoutData) : @(15),
                               //: };
                               };

    //: NSDictionary *userTypeItem = @{
    NSDictionary *userTypeItem = @{
                                   //: @"title" : [NTESLanguageManager getTextWithKey:@"activity_group_member_info2_shenfen"],//@"身份".nim_localized,
                                   StringFromScrimData(kStr_novelVehicleData) : [LabelCell tinkleKey:StringFromScrimData(kStr_totalVehicleValue)],//@"身份".nim_localized,
                                   //: @"detailTitle" : [ZZZTeamHelper memberTypeText:self.member.userType],
                                   StringFromScrimData(kStr_commendData) : [PathHelper greenMember:self.member.userType],
                                   //: @"action" : ([self isOwner] && ![self isSelf])? @"updateTeamRole" : @"",
                                   StringFromScrimData(kStr_encounterName) : ([self top] && ![self shadow])? StringFromScrimData(kStr_yardValue) : @"",
                                   //: @"accessory" : @([self canChangeUserType]),
                                   StringFromScrimData(kStr_housingTitle) : @([self to]),
                                   //: @"rowHeight" : @(50),
                                   StringFromScrimData(kStr_historyText) : @(50),
                                   //: @"leftEdge" : @(15),
                                   StringFromScrimData(kStr_throughoutData) : @(15),
                                   //: };
                                   };

    //: NSDictionary *inviterAccidItem = @{
    NSDictionary *inviterAccidItem = @{
                                       //: @"title" : [NTESLanguageManager getTextWithKey:@"activity_group_member_info2_inviter"],//@"邀请人".nim_localized,
                                       StringFromScrimData(kStr_novelVehicleData) : [LabelCell tinkleKey:StringFromScrimData(kStr_speciesViaData)],//@"邀请人".nim_localized,
                                       //: @"detailTitle" : _member.inviterAccid ? (_member.inviterAccid.length ? _member.inviterAccid : _member.userId) : @"本地不存在".nim_localized,
                                       StringFromScrimData(kStr_commendData) : _member.inviterAccid ? (_member.inviterAccid.length ? _member.inviterAccid : _member.userId) : StringFromScrimData(kStr_therapistTianRegulatoryName).start,
                                       //: @"action" : @"",
                                       StringFromScrimData(kStr_encounterName) : @"",
                                       //: @"accessory" : [self isOwner] && ![self isSelf]? @(YES) : @(NO),
                                       StringFromScrimData(kStr_housingTitle) : [self top] && ![self shadow]? @(YES) : @(NO),
                                       //: @"rowHeight" : @(50),
                                       StringFromScrimData(kStr_historyText) : @(50),
                                       //: @"leftEdge" : @(15),
                                       StringFromScrimData(kStr_throughoutData) : @(15),
                                       //: };
                                       };

    //: NSDictionary *isMuteItem = @{
    NSDictionary *isMuteItem = @{
                                  //: @"title" : [NTESLanguageManager getTextWithKey:@"group_member_info_activity_mute_msg"],//@"设置禁言".nim_localized,
                                  StringFromScrimData(kStr_novelVehicleData) : [LabelCell tinkleKey:StringFromScrimData(kStr_dentedWheneverValue)],//@"设置禁言".nim_localized,
                                  //: @"cellClass" : @"ZZZKitSwitcherCell",
                                  StringFromScrimData(kStr_redSonData) : @"LabelView",
                                  //: @"action" : @"updateMute:",
                                  StringFromScrimData(kStr_encounterName) : StringFromScrimData(kStr_publishName),
                                  //: @"forbidSelect" : @(YES),
                                  StringFromScrimData(kStr_sorryTartData) : @(YES),
                                  //: @"rowHeight" : @(50),
                                  StringFromScrimData(kStr_historyText) : @(50),
                                  //: @"disableUserInteraction":@(![self canUpdateTeamMember]),
                                  StringFromScrimData(kStr_cosValue):@(![self outBy]),
                                  //: @"extraInfo" : @(_member.isMuted),
                                  StringFromScrimData(kStr_textureResolutionData) : @(_member.isMuted),
                                  //: @"leftEdge" : @(15),
                                  StringFromScrimData(kStr_throughoutData) : @(15),
                                  //: };
                                  };

    //: NSDictionary *kickItem = @{
    NSDictionary *kickItem = @{
                               //: @"title" : @"remove_member",//@"移出本群".nim_localized,
                               StringFromScrimData(kStr_novelVehicleData) : StringFromScrimData(kStr_himRedValue),//@"移出本群".nim_localized,
                               //: @"cellClass" : @"ZZZKitColorButtonCell",
                               StringFromScrimData(kStr_redSonData) : @"WithViewCell",
                               //: @"action" : @"onKickBtnClick:",
                               StringFromScrimData(kStr_encounterName) : StringFromScrimData(kStr_retchQuitTitle),
                               //: @"extraInfo" : @(ZZZKitColorButtonCellStyleRed),
                               StringFromScrimData(kStr_textureResolutionData) : @(ZZZKitColorButtonCellStyleRed),
                               //: @"rowHeight" : @(70),
                               StringFromScrimData(kStr_historyText) : @(70),
                               //: @"disable" : @([self isSelf] || ![self canKickTeamMember]),
                               StringFromScrimData(kStr_imageStretchData) : @([self shadow] || ![self atDrag]),
                               //: @"leftEdge" : @(0),
                               StringFromScrimData(kStr_throughoutData) : @(0),
                               //: };
                               };

    //: NSArray *rowContent = nil;
    NSArray *rowContent = nil;
    //: if (_member.teamType == NIMTeamTypeSuper) {
    if (_member.teamType == NIMTeamTypeSuper) {
        //: rowContent = @[headerItem, nickItem, userTypeItem, isMuteItem, kickItem];
        rowContent = @[headerItem, nickItem, userTypeItem, isMuteItem, kickItem];
    //: } else {
    } else {
        //: rowContent = @[headerItem, nickItem, userTypeItem, inviterAccidItem, isMuteItem, kickItem];
        rowContent = @[headerItem, nickItem, userTypeItem, inviterAccidItem, isMuteItem, kickItem];
    }

    //: NSArray *data = @[
    NSArray *data = @[
                      //: @{
                      @{
                          //: @"headerTitle":@"",
                          StringFromScrimData(kStr_convictCheekValue):@"",
                          //: @"row" :rowContent,
                          StringFromScrimData(kStr_committeeData) :rowContent,
                          //: @"footerTitle":@""
                          StringFromScrimData(kStr_pointImageValue):@""
                          //: },
                          },
                       //: ];
                       ];
    //: return [NIMCommonTableSection sectionsWithData:data];
    return [CellItem detectData:data];
}

//: - (void)refreshData{
- (void)imageOrJobAssemblage{
    //: _viewer = _dataSource.myCard;
    _viewer = _dataSource.image;
    //: _member = [_dataSource memberWithUserId:_memberId];
    _member = [_dataSource showMode:_memberId];
    //: self.data = [self buildData];
    self.data = [self pallet];
    //: [self.tableView reloadData];
    [self.tableView reloadData];
}

//: - (void)onKickBtnClick:(id)sender {
- (void)snap:(id)sender {
    //: _kickAlertView = [[UIAlertView alloc] initWithTitle:@""
    _kickAlertView = [[UIAlertView alloc] initWithTitle:@""
                                                //: message:[NTESLanguageManager getTextWithKey:@"remove_member"]//@"移出本群".nim_localized
                                                message:[LabelCell tinkleKey:StringFromScrimData(kStr_himRedValue)]//@"移出本群".nim_localized
                                               //: delegate:self
                                               delegate:self
                                      //: cancelButtonTitle:[NTESLanguageManager getTextWithKey:@"contact_tag_fragment_cancel"]
                                      cancelButtonTitle:[LabelCell tinkleKey:StringFromScrimData(kStr_saltTitle)]
                                      //: otherButtonTitles:[NTESLanguageManager getTextWithKey:@"contact_tag_fragment_sure"], nil];
                                      otherButtonTitles:[LabelCell tinkleKey:StringFromScrimData(kStr_ambitData)], nil];
    //: [_kickAlertView show];
    [_kickAlertView show];
}

//: - (void)updateTeamNick
- (void)displayNick
{
    //: _updateNickAlertView = [[UIAlertView alloc] initWithTitle:@""
    _updateNickAlertView = [[UIAlertView alloc] initWithTitle:@""
                                                      //: message:[NTESLanguageManager getTextWithKey:@"Modify_group_nickname"]//@"修改群昵称".nim_localized
                                                      message:[LabelCell tinkleKey:StringFromScrimData(kStr_directShouldValue)]//@"修改群昵称".nim_localized
                                                     //: delegate:self
                                                     delegate:self
                                            //: cancelButtonTitle:[NTESLanguageManager getTextWithKey:@"contact_tag_fragment_cancel"]
                                            cancelButtonTitle:[LabelCell tinkleKey:StringFromScrimData(kStr_saltTitle)]
                                            //: otherButtonTitles:[NTESLanguageManager getTextWithKey:@"contact_tag_fragment_sure"], nil];
                                            otherButtonTitles:[LabelCell tinkleKey:StringFromScrimData(kStr_ambitData)], nil];
    //: _updateNickAlertView.alertViewStyle = UIAlertViewStylePlainTextInput;
    _updateNickAlertView.alertViewStyle = UIAlertViewStylePlainTextInput;
    //: [_updateNickAlertView show];
    [_updateNickAlertView show];
}

//: - (void)updateTeamRole
- (void)stigmatise
{
    //: if (![self canChangeUserType]) {
    if (![self to]) {
        //: return;
        return;
    }
    //: UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:[NTESLanguageManager getTextWithKey:@"管理员操作"]
    UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:[LabelCell tinkleKey:StringFromScrimData(kStr_nagData)]
                                                       //: delegate:self
                                                       delegate:self
                                              //: cancelButtonTitle:[NTESLanguageManager getTextWithKey:@"contact_tag_fragment_cancel"]
                                              cancelButtonTitle:[LabelCell tinkleKey:StringFromScrimData(kStr_saltTitle)]
                                         //: destructiveButtonTitle:nil
                                         destructiveButtonTitle:nil
                                              //: otherButtonTitles: self.member.userType == NIMTeamMemberTypeManager ? [NTESLanguageManager getTextWithKey:@"取消管理员"] : [NTESLanguageManager getTextWithKey:@"设为管理员"], nil];
                                              otherButtonTitles: self.member.userType == NIMTeamMemberTypeManager ? [LabelCell tinkleKey:StringFromScrimData(kStr_whoeverSumIncreasedData)] : [LabelCell tinkleKey:StringFromScrimData(kStr_convictTitle)], nil];
    //: [sheet showInView:self.view];
    [sheet showInView:self.view];
}

//: - (void)updateMute:(UISwitch *)switcher {
- (void)sizeTip:(UISwitch *)switcher {
    //: NSString *userId = self.member.userId;
    NSString *userId = self.member.userId;
    //: BOOL mute = switcher.on;
    BOOL mute = switcher.on;
    //: __block typeof(self) wself = self;
    __block typeof(self) wself = self;
    //: [_dataSource updateUserMuteState:userId mute:mute completion:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
    [_dataSource book:userId wearerCompletion:mute viewDown:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
        //: [wself showToastMsg:msg];
        [wself exhibitWith:msg];
        //: if (error) {
        if (error) {
            //: switcher.on = !mute;
            switcher.on = !mute;
        }
        //: if (wself.delegate && [wself.delegate respondsToSelector:@selector(onTeamMemberMuted:mute:)]) {
        if (wself.delegate && [wself.delegate respondsToSelector:@selector(be:addDoing:)]) {
            //: [wself.delegate onTeamMemberMuted:wself.member mute:mute];
            [wself.delegate be:wself.member addDoing:mute];
        }
    //: }];
    }];
}

//: - (void)removeManager:(NSString *)memberId{
- (void)change:(NSString *)memberId{
    //: NSString *userId = self.member.userId;
    NSString *userId = self.member.userId;
    //: __block typeof(self) wself = self;
    __block typeof(self) wself = self;
    //: [_dataSource removeManagers:@[userId] completion:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
    [_dataSource calendarCompletion:@[userId] info:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
        //: [wself showToastMsg:msg];
        [wself exhibitWith:msg];
    //: }];
    }];
}

//: - (void)addManager:(NSString *)memberId{
- (void)session:(NSString *)memberId{
    //: if (!memberId) {
    if (!memberId) {
        //: return;
        return;
    }
    //: __block typeof(self) wself = self;
    __block typeof(self) wself = self;
    //: [_dataSource addManagers:@[memberId] completion:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
    [_dataSource cell:@[memberId] bottom:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
        //: [wself showToastMsg:msg];
        [wself exhibitWith:msg];
    //: }];
    }];
}

//: - (void)teamMemberUpdate:(NSNotification *)note {
- (void)obscured:(NSNotification *)note {
    //: [self refreshData];
    [self imageOrJobAssemblage];
}

//: #pragma mark - UIAlertViewDelegate
#pragma mark - UIAlertViewDelegate
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex{
    //: if (alertView == _kickAlertView) {
    if (alertView == _kickAlertView) {
        //: if(alertView.cancelButtonIndex != buttonIndex) {
        if(alertView.cancelButtonIndex != buttonIndex) {
            //: NSString *userId = self.member.userId;
            NSString *userId = self.member.userId;
            //: __weak typeof(self) weakSelf = self;
            __weak typeof(self) weakSelf = self;
            //: [_dataSource kickUsers:@[userId] completion:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
            [_dataSource language:@[userId] down:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
                //: [weakSelf showToastMsg:msg];
                [weakSelf exhibitWith:msg];
                //: if (!error) {
                if (!error) {
                    //: [weakSelf.navigationController popViewControllerAnimated:NO];
                    [weakSelf.navigationController popViewControllerAnimated:NO];
                    //: if([weakSelf.delegate respondsToSelector:@selector(onTeamMemberKicked:)]) {
                    if([weakSelf.delegate respondsToSelector:@selector(teamMemberOnMessage:)]) {
                        //: [weakSelf.delegate onTeamMemberKicked:weakSelf.member];
                        [weakSelf.delegate teamMemberOnMessage:weakSelf.member];
                    }
                }
            //: }];
            }];
        }
    }
    //: if (alertView == _updateNickAlertView) {
    if (alertView == _updateNickAlertView) {
        //: switch (buttonIndex) {
        switch (buttonIndex) {
            //: case 0:
            case 0://取消
                //: break;
                break;
            //: case 1:{
            case 1:{
                //: NSString *name = [alertView textFieldAtIndex:0].text;
                NSString *name = [alertView textFieldAtIndex:0].text;
                //: NSString *userId = self.member.userId;
                NSString *userId = self.member.userId;
                //: __weak typeof(self) weakSelf = self;
                __weak typeof(self) weakSelf = self;
                //: [_dataSource updateUserNick:userId nick:name completion:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
                [_dataSource sound:userId image:name my:^(NSError * _Nonnull error, NSString * _Nonnull msg) {
                    //: [weakSelf showToastMsg:msg];
                    [weakSelf exhibitWith:msg];
                //: }];
                }];
                //: break;
                break;
            }
            //: default:
            default:
                //: break;
                break;
        }
    }
}

//: #pragma mark - UIActionSheetDelegate
#pragma mark - UIActionSheetDelegate
- (void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex{
    //: if(buttonIndex == 0) {
    if(buttonIndex == 0) {
        //: NSString *userId = self.member.userId;
        NSString *userId = self.member.userId;
        //: NIMTeamMemberType userType = self.member.userType;
        NIMTeamMemberType userType = self.member.userType;
        //: if (userType == NIMTeamMemberTypeManager) {
        if (userType == NIMTeamMemberTypeManager) {
            //: [self removeManager:userId];
            [self change:userId];
        //: }else{
        }else{
            //: [self addManager:userId];
            [self session:userId];
        }
    }
}

//: #pragma mark - Private
#pragma mark - Private
//: - (BOOL)isSelf {
- (BOOL)shadow {
    //: return [self.viewer.userId isEqualToString:self.member.userId];
    return [self.viewer.userId isEqualToString:self.member.userId];
}

//: - (BOOL)isOwner {
- (BOOL)top {
    //: return self.viewer.userType == NIMTeamMemberTypeOwner;
    return self.viewer.userType == NIMTeamMemberTypeOwner;
}

//: - (BOOL)canUpdateTeamMember {
- (BOOL)outBy {
    //: BOOL ret = NO;
    BOOL ret = NO;
    //: BOOL viewerIsOwner = [self isOwner];
    BOOL viewerIsOwner = [self top];
    //: BOOL viewerIsManager = self.viewer.userType == NIMTeamMemberTypeManager;
    BOOL viewerIsManager = self.viewer.userType == NIMTeamMemberTypeManager;
    //: BOOL memberIsNormal = self.member.userType == NIMTeamMemberTypeNormal;
    BOOL memberIsNormal = self.member.userType == NIMTeamMemberTypeNormal;
    //: if (viewerIsOwner) {
    if (viewerIsOwner) {
        //: ret = ![self isSelf];
        ret = ![self shadow];
    //: } else if (viewerIsManager) {
    } else if (viewerIsManager) {
        //: ret = memberIsNormal;
        ret = memberIsNormal;
    }
    //: return ret;
    return ret;
}

//: - (BOOL)canChangeUserType {
- (BOOL)to {
    //: BOOL ret = ([self isOwner] && ![self isSelf]);
    BOOL ret = ([self top] && ![self shadow]);
    //: return ret;
    return ret;
}

//: - (BOOL)canKickTeamMember {
- (BOOL)atDrag {
    //: BOOL ret = [self canUpdateTeamMember];
    BOOL ret = [self outBy];
    //: return ret;
    return ret;
}

//: - (void)showToastMsg:(NSString *)msg {
- (void)exhibitWith:(NSString *)msg {
    //: if (msg) {
    if (msg) {
        //: [self.view makeToast:msg
        [self.view makeToast:msg
                    //: duration:2.0
                    duration:2.0
                    //: position:CSToastPositionCenter];
                    position:CSToastPositionCenter];
    }
}

//: #pragma mark - Getter
#pragma mark - Getter
//: - (UITableView *)tableView {
- (UITableView *)tableView {
    //: if (!_tableView) {
    if (!_tableView) {
        //: _tableView = [[UITableView alloc] initWithFrame:self.view.bounds style:UITableViewStylePlain];
        _tableView = [[UITableView alloc] initWithFrame:self.view.bounds style:UITableViewStylePlain];
        //: _tableView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
        _tableView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
        //: _tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
        _tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
        //: _tableView.tableFooterView = [UIView new];
        _tableView.tableFooterView = [UIView new];
    }
    //: return _tableView;
    return _tableView;
}

//: @end
@end

Byte * ScrimDataToCache(Byte *data) {
    int seriesVehicle = data[0];
    int gageLabel = data[1];
    Byte dependentPossessDented = data[2];
    int powerfulView = data[3];
    if (!seriesVehicle) return data + powerfulView;
    for (int i = powerfulView; i < powerfulView + gageLabel; i++) {
        int value = data[i] + dependentPossessDented;
        if (value > 255) {
            value -= 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[powerfulView + gageLabel] = 0;
    return data + powerfulView;
}

NSString *StringFromScrimData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)ScrimDataToCache(data)];
}
